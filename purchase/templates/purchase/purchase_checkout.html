{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}


{% block content %}

<div class="row justify-content-center">
    <div class="col-8">
      <label>First Name:</label>
      <input class="textinput textInput form-control mb-2" readonly value="{{ profile.user.first_name }}"> 
      <label>Last Name:</label>
      <input class="textinput textInput form-control mb-2" readonly value="{{ profile.user.last_name }}"> 
      <label>Program to purchase:</label>
      <input class="textinput textInput form-control mb-2" readonly value="{{ program.name }}"> 
      <label>Program price:</label>
      <input class="textinput textInput form-control mb-2" readonly value="{{ program.price }}â‚¬"> 
      <form action="{% url 'purchase_checkout' program.id %}" method="POST" id="payment-form">
         {% csrf_token %}
         {{ form | crispy }}
         <div class="mb-3" id="card-element">
          <!-- Elements will create input elements here -->
         </div>

         <!-- We'll put the error messages in this element -->
         <div id="card-errors" role="alert"></div>
         <a href="" class="btn btn-danger">Cancel</a>
         <button class="btn btn-success" id="submit" type="submit">Pay and Confirm</button>
      </form>
    </div>
</div>

{% endblock %}

{% block additionaljs %}

   {{ block.super }}

   {{ stripe_public_key|json_script:"id_stripe_public_key" }}
   {{ client_secret|json_script:"id_client_secret" }}

   <script src="{% static '/js/stripe.js' %}"></script>

{% endblock %}